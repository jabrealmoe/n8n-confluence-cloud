modules:
  trigger:
    - key: confluence-pii-trigger
      function: main
      events:
        - avi:confluence:created:page
        - avi:confluence:updated:page
        - avi:confluence:liked:page
  function:
    - key: main
      handler: index.run
    - key: pii-admin-resolver
      handler: resolver.handler
  confluence:globalSettings:
    - key: pii-admin-settings-v3
      resource: admin-resource
      resolver:
        function: pii-admin-resolver
      title: PII Configuration
resources:
  - key: admin-resource
    path: static/admin-build
app:
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/d4615e62-0837-4e1f-9fd8-02e2dea232ab
permissions:
  scopes:
    - write:page:confluence
    - read:page:confluence
    - read:confluence-content.all
    - read:confluence-content.summary
    - read:jira-work
    - search:confluence
    - write:confluence-content
    - read:confluence-user
    - write:page:confluence
    - storage:app
